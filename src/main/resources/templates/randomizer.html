<!DOCTYPE HTML>
<html xmlns:th="https://www.thymeleaf.org">
<head>
    <title>Task 9: D&D Randomizer w/ JSON</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
</head>
<body>

<h1>Auto-generated stat rolls for your D&D character:</h1>
<p id="stat0">Roll 1</p>
<p id="stat1">Roll 2</p>
<p id="stat2">Roll 3</p>
<p id="stat3">Roll 4</p>
<p id="stat4">Roll 5</p>
<p id="stat5">Roll 6</p>
<button id="rerollButton">Reroll</button>


<script th:inline="javascript">
    let rerollButton = document.getElementById("rerollButton");
    let stat0 = document.getElementById("stat0");
    let stat1 = document.getElementById("stat1");
    let stat2 = document.getElementById("stat2");
    let stat3 = document.getElementById("stat3");
    let stat4 = document.getElementById("stat4");
    let stat5 = document.getElementById("stat5");

    function rollStats() {
        fetch("/roll", {method: "POST"})
            .then(response => response.json())
            .then(statRoll => outputToPage(statRoll))
        ;
    }

    function outputToPage(statRoll) {
        console.log(statRoll);
        var roll0Sum = statRoll.statRollsList[0].diceRolls[0] +
            statRoll.statRollsList[0].diceRolls[1] +
            statRoll.statRollsList[0].diceRolls[2];
        stat0.innerHTML = 'Roll 1: ' + roll0Sum +
            ' (' + statRoll.statRollsList[0].diceRolls + ')';

        var roll1Sum = statRoll.statRollsList[1].diceRolls[0] +
            statRoll.statRollsList[1].diceRolls[1] +
            statRoll.statRollsList[1].diceRolls[2];
        stat1.innerHTML = 'Roll 2: ' + roll1Sum +
            ' (' + statRoll.statRollsList[1].diceRolls + ')';

        var roll2Sum = statRoll.statRollsList[2].diceRolls[0] +
            statRoll.statRollsList[2].diceRolls[1] +
            statRoll.statRollsList[2].diceRolls[2];
        stat2.innerHTML = 'Roll 3: ' + roll2Sum +
            ' (' + statRoll.statRollsList[2].diceRolls + ')';

        var roll3Sum = statRoll.statRollsList[3].diceRolls[0] +
            statRoll.statRollsList[3].diceRolls[1] +
            statRoll.statRollsList[3].diceRolls[2];
        stat3.innerHTML = 'Roll 4: ' + roll3Sum +
            ' (' + statRoll.statRollsList[3].diceRolls + ')';

        var roll4Sum = statRoll.statRollsList[4].diceRolls[0] +
            statRoll.statRollsList[4].diceRolls[1] +
            statRoll.statRollsList[4].diceRolls[2];
        stat4.innerHTML = 'Roll 5: ' + roll4Sum +
            ' (' + statRoll.statRollsList[4].diceRolls + ')';

        var roll5Sum = statRoll.statRollsList[5].diceRolls[0] +
            statRoll.statRollsList[5].diceRolls[1] +
            statRoll.statRollsList[5].diceRolls[2];
        stat5.innerHTML = 'Roll 6: ' + roll5Sum +
            ' (' + statRoll.statRollsList[5].diceRolls + ')';


        // stat1.innerHTML = statRoll.statRollsList[1].diceRolls;
        // stat2.innerHTML = statRoll.statRollsList[2].diceRolls;
        // stat3.innerHTML = statRoll.statRollsList[3].diceRolls;
        // stat4.innerHTML = statRoll.statRollsList[4].diceRolls;
        // stat5.innerHTML = statRoll.statRollsList[5].diceRolls;
    }

    window.onload = () => {
        rollStats();
    };

    rerollButton.onclick = () => rollStats();
</script>

</body>
</html>